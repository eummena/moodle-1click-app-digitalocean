{"version":3,"sources":["../src/tooltip.js"],"names":["define","$","Aria","Tooltip","selector","_regionSelector","each","index","element","tooltipId","attr","tooltipele","document","getElementById","correctRole","hide","on","_handleFocus","bind","_handleMouseOver","_handleMouseOut","_handleBlur","_handleKeyDown","prototype","_showTooltip","e","triggerElement","target","show","unhide","is","inner","append","contents","addClass","pos","offset","top","height","_hideTooltip","which"],"mappings":"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","sourcesContent":["define(['jquery', 'core/aria'], function($, Aria) {\n\n    /**\n     * Tooltip class.\n     *\n     * @param {String} selector The css selector for the node(s) to enhance with tooltips.\n     */\n    var Tooltip = function(selector) {\n        // Tooltip code matches: http://www.w3.org/WAI/PF/aria-practices/#tooltip\n        this._regionSelector = selector;\n\n        // For each node matching the selector - find an aria-describedby attribute pointing to an role=\"tooltip\" element.\n\n        $(this._regionSelector).each(function(index, element) {\n            var tooltipId = $(element).attr('aria-describedby');\n            if (tooltipId) {\n                var tooltipele = document.getElementById(tooltipId);\n                if (tooltipele) {\n                    var correctRole = $(tooltipele).attr('role') == 'tooltip';\n\n                    if (correctRole) {\n                        $(tooltipele).hide();\n                        // Ensure the trigger for the tooltip is keyboard focusable.\n                        $(element).attr('tabindex', '0');\n                    }\n\n                    // Attach listeners.\n                    $(element).on('focus', this._handleFocus.bind(this));\n                    $(element).on('mouseover', this._handleMouseOver.bind(this));\n                    $(element).on('mouseout', this._handleMouseOut.bind(this));\n                    $(element).on('blur', this._handleBlur.bind(this));\n                    $(element).on('keydown', this._handleKeyDown.bind(this));\n                }\n            }\n        }.bind(this));\n    };\n\n    /** @type {String} Selector for the page region containing the user navigation. */\n    Tooltip.prototype._regionSelector = null;\n\n    /**\n     * Find the tooltip referred to by this element and show it.\n     *\n     * @param {Event} e\n     */\n    Tooltip.prototype._showTooltip = function(e) {\n        var triggerElement = $(e.target);\n        var tooltipId = triggerElement.attr('aria-describedby');\n        if (tooltipId) {\n            var tooltipele = $(document.getElementById(tooltipId));\n\n            tooltipele.show();\n            Aria.unhide(tooltipele);\n\n            if (!tooltipele.is('.tooltip')) {\n                // Change the markup to a bootstrap tooltip.\n                var inner = $('<div class=\"tooltip-inner\"></div>');\n                inner.append(tooltipele.contents());\n                tooltipele.append(inner);\n                tooltipele.addClass('tooltip');\n                tooltipele.addClass('bottom');\n                tooltipele.append('<div class=\"tooltip-arrow\"></div>');\n            }\n            var pos = triggerElement.offset();\n            pos.top += triggerElement.height() + 10;\n            $(tooltipele).offset(pos);\n        }\n    };\n\n    /**\n     * Find the tooltip referred to by this element and hide it.\n     *\n     * @param {Event} e\n     */\n    Tooltip.prototype._hideTooltip = function(e) {\n        var triggerElement = $(e.target);\n        var tooltipId = triggerElement.attr('aria-describedby');\n        if (tooltipId) {\n            var tooltipele = document.getElementById(tooltipId);\n\n            $(tooltipele).hide();\n            Aria.hide(tooltipele);\n        }\n    };\n\n    /**\n     * Listener for focus events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleFocus = function(e) {\n        this._showTooltip(e);\n    };\n\n    /**\n     * Listener for keydown events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleKeyDown = function(e) {\n        if (e.which == 27) {\n            this._hideTooltip(e);\n        }\n    };\n\n    /**\n     * Listener for mouseover events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleMouseOver = function(e) {\n        this._showTooltip(e);\n    };\n\n    /**\n     * Listener for mouseout events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleMouseOut = function(e) {\n        var triggerElement = $(e.target);\n\n        if (!triggerElement.is(\":focus\")) {\n            this._hideTooltip(e);\n        }\n    };\n\n    /**\n     * Listener for blur events.\n     * @param {Event} e\n     */\n    Tooltip.prototype._handleBlur = function(e) {\n        this._hideTooltip(e);\n    };\n\n    return Tooltip;\n});\n"],"file":"tooltip.min.js"}